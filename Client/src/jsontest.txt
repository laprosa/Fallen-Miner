#include "http_client.h"
#include "json_printer.h"
#include <iostream>

int main() {
    std::wstring url = L"https://pastebin.com/raw/eBuFxvN1";
    
    // Single function call to fetch and print
    std::string jsonStr = fetchJsonFromUrl(url);
    if (!jsonStr.empty()) {
        try {
            printMiningPoolDetails(json::parse(jsonStr));
        } catch (const json::exception& e) {
            std::cerr << "JSON Parse Error: " << e.what() << std::endl;
            return 1;
        }
    } else {
        return 1;
    }
    
    return 0;
}